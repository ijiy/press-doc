import{_ as n,c as a,a0 as l,o as p}from"./chunks/framework.Bakaa70P.js";const u=JSON.parse('{"title":"filemanager-webpack-plugin 【zip压缩】","description":"","frontmatter":{},"headers":[],"relativePath":"node/plugin/filemanager-webpack-plugin.md","filePath":"node/plugin/filemanager-webpack-plugin.md","lastUpdated":1715407916000}'),e={name:"node/plugin/filemanager-webpack-plugin.md"};function o(r,s,c,t,i,F){return p(),a("div",null,s[0]||(s[0]=[l(`<h1 id="filemanager-webpack-plugin-【zip压缩】" tabindex="-1"><a href="https://github.com/gregnb/filemanager-webpack-plugin" target="_blank" rel="noreferrer">filemanager-webpack-plugin 【zip压缩】</a> <a class="header-anchor" href="#filemanager-webpack-plugin-【zip压缩】" aria-label="Permalink to &quot;[filemanager-webpack-plugin 【zip压缩】](https://github.com/gregnb/filemanager-webpack-plugin)&quot;">​</a></h1><ul><li>依赖 webpack</li></ul><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#A6E22E;">npm</span><span style="color:#E6DB74;"> i</span><span style="color:#E6DB74;"> filemanager-webpack-plugin</span><span style="color:#AE81FF;"> -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="vue-config-js" tabindex="-1">vue.config.js <a class="header-anchor" href="#vue-config-js" aria-label="Permalink to &quot;vue.config.js&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 可全局使用, 必须以&quot;VUE_APP_&quot;为前缀, 否则不会注入全局</span></span>
<span class="line"><span style="color:#88846F;">//</span></span>
<span class="line"><span style="color:#F8F8F2;">process.env.VUE_APP_NAME </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> \`</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">process.env.VUE_APP_MODE </span><span style="color:#F92672;">===</span><span style="color:#E6DB74;"> &#39;prod&#39;</span><span style="color:#F92672;"> ?</span><span style="color:#E6DB74;"> &#39;正&#39;</span><span style="color:#F92672;"> :</span><span style="color:#E6DB74;"> &#39;测&#39;</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">试-</span><span style="color:#F92672;">\${</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">toLocaleString</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;zh&#39;</span><span style="color:#F8F8F2;">, {hour12: </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">}).</span><span style="color:#A6E22E;">replace</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">/</span><span style="color:#AE81FF;">[/: ]</span><span style="color:#E6DB74;">/</span><span style="color:#F92672;">g</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;-&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">\`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">module</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;font-style:italic;">exports</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#A6E22E;">	configureWebpack</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">config</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">		process.env.NODE_ENV </span><span style="color:#F92672;">===</span><span style="color:#E6DB74;"> &#39;production&#39;</span><span style="color:#F92672;"> &amp;&amp;</span><span style="color:#F8F8F2;"> config.plugins.</span><span style="color:#A6E22E;">push</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> (</span><span style="color:#A6E22E;">require</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;filemanager-webpack-plugin&#39;</span><span style="color:#F8F8F2;">))({</span></span>
<span class="line"><span style="color:#F8F8F2;">			events: {</span></span>
<span class="line"><span style="color:#F8F8F2;">				onEnd: {</span></span>
<span class="line"><span style="color:#F8F8F2;">					delete: [</span><span style="color:#E6DB74;">&#39;./*.zip&#39;</span><span style="color:#F8F8F2;">],</span></span>
<span class="line"><span style="color:#F8F8F2;">					archive: [{</span></span>
<span class="line"><span style="color:#F8F8F2;">						source: </span><span style="color:#E6DB74;">&#39;./dist&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#88846F;">						// 路径中不能包含&quot;空格&quot;, &quot;冒号&quot;, 否则无法压缩</span></span>
<span class="line"><span style="color:#F8F8F2;">						destination: </span><span style="color:#E6DB74;">\`./</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">process.env.VUE_APP_NAME</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">.zip\`</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">					}],</span></span>
<span class="line"><span style="color:#F8F8F2;">				},</span></span>
<span class="line"><span style="color:#F8F8F2;">			},</span></span>
<span class="line"><span style="color:#F8F8F2;">		}));</span></span>
<span class="line"><span style="color:#F8F8F2;">	},</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div>`,6)]))}const b=n(e,[["render",o]]);export{u as __pageData,b as default};
