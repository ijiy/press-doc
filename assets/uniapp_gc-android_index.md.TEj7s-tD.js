import{_ as e,c as l,o as i,a1 as o}from"./chunks/framework.B3EJgH_4.js";const g=JSON.parse('{"title":"uniapp 【安卓原生工程】","description":"","frontmatter":{},"headers":[],"relativePath":"uniapp/gc-android/index.md","filePath":"uniapp/gc-android/index.md","lastUpdated":1716256931000}'),d={name:"uniapp/gc-android/index.md"},a=o('<h1 id="uniapp-【安卓原生工程】" tabindex="-1">uniapp 【安卓原生工程】 <a class="header-anchor" href="#uniapp-【安卓原生工程】" aria-label="Permalink to &quot;uniapp 【安卓原生工程】&quot;">​</a></h1><ul><li><p>只适用于构建安卓APP应用</p></li><li><p>也可在HBuilderX上运行</p></li></ul><h2 id="重构安卓原生工程" tabindex="-1">重构<code>安卓原生工程</code> <a class="header-anchor" href="#重构安卓原生工程" aria-label="Permalink to &quot;重构`安卓原生工程`&quot;">​</a></h2><ul><li><p>前往下载 <a href="https://nativesupport.dcloud.net.cn/AppDocs/download/android" target="_blank" rel="noreferrer">Android 离线SDK</a></p></li><li><p>下载后解压, 取其根目录下的<code>HBuilder-Integrate-AS</code>文件作为<code>安卓原生工程</code>, 并拷贝到<code>D:\\Project</code>目录下</p><ul><li>D:\\Project\\HBuilder-Integrate-AS</li></ul></li><li><p>重命名文件</p><ul><li><code>HBuilder-Integrate-AS</code>, 改成 <code>gsm-app</code> (公司名-应用名) <ul><li><code>HBuilder-Integrate-AS.iml</code>, 改成 <code>gsm-app.iml</code></li><li><code>simpleDemo</code>, 改成 <code>app</code><ul><li><code>simpleDemo.iml</code>, 改成 <code>app.iml</code></li></ul></li><li>app\\src\\main\\assets\\apps <ul><li><code>__UNI__A</code>, 改成 <code>__UNI__xxx</code> (前往获取 <a href="./../app-id">Appid</a>)</li></ul></li></ul></li></ul></li><li><p>修改内容</p><ul><li>settings.gradle <ul><li><code>include &#39;:simpleDemo&#39;</code>, 改成 <ul><li><code>include &#39;:app&#39;</code></li></ul></li></ul></li><li>gradle\\wrapper\\gradle-wrapper.properties <ul><li><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.5-all.zip</code>, 改成 <ul><li><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip</code><ul><li>会保存到 <code>C:\\Users\\当前系统用户\\.gradle\\wrapper\\dists\\gradle-7.5-bin</code></li></ul></li></ul></li></ul></li><li>build.gradle <ul><li><code>classpath &#39;com.android.tools.build:gradle:4.1.1&#39;</code>, 改成 <ul><li><code>classpath &#39;com.android.tools.build:gradle:7.4.2&#39;</code> (该版本<code>compileSdkVersion</code>不能大于<code>33</code>)</li></ul></li></ul></li><li>app\\build.gradle <ul><li><code>applicationId &quot;com.android.simple&quot;</code>, 改成 <ul><li><code>applicationId &quot;com.gsm.app&quot;</code> (和<code>开发者中心</code>对应应用的<a href="./../app-key#Android包名">Android包名</a>一致)</li></ul></li><li><code>targetSdkVersion 28</code>, 改成 <ul><li><code>targetSdkVersion 31</code> (<code>Google Play</code>要求<code>31</code>或更高版本, 不改会报错无法打包)</li></ul></li><li><code>compileSdkVersion 30</code>, 改成 <ul><li><code>compileSdkVersion 31</code> (不改也没影响)</li></ul></li></ul></li><li>app\\src\\main\\AndroidManifest.xml <ul><li><code>package=&quot;com.android.simple&quot;</code>, 改成 <ul><li><code>package=&quot;com.gsm.app&quot;</code> (进程名, 作为标识, 不一定采用包名)</li></ul></li><li>两个<code>&lt;activity</code>标签添加属性<code>android:exported=&quot;true&quot;</code> (Android 12 和更高版本需要, 不改会报错无法打包)</li><li><code>android:value=&quot;开发者需登录https://dev.dcloud.net.cn/申请签名&quot;</code>, 改成 <ul><li><code>android:value=&quot;app_key_32xxx&quot;</code> (前往 <a href="./../app-key#获取APPKey">获取APPKey</a>)</li></ul></li></ul></li><li>app\\src\\main\\res\\values\\strings.xml <ul><li><code>&lt;string name=&quot;app_name&quot;&gt;HBuilder-SimpleDemo-AS&lt;/string&gt;</code>, 改成 <ul><li><code>&lt;string name=&quot;app_name&quot;&gt;应用名称&lt;/string&gt;</code> (<code>应用名称</code>, 和<code>开发者中心</code>对应应用的<code>应用名称</code>一致, 和<code>manifest.json</code>的<code>name</code>一致)</li></ul></li></ul></li><li>app\\src\\main\\assets\\data\\dcloud_control.xml <ul><li><code>&lt;app appid=&quot;__UNI__A&quot; appver=&quot;&quot;/&gt;</code>, 改成 <ul><li><code>&lt;app appid=&quot;__UNI__xxx&quot; appver=&quot;&quot;/&gt;</code></li></ul></li></ul></li></ul></li></ul><h2 id="打开项目" tabindex="-1">打开项目 <a class="header-anchor" href="#打开项目" aria-label="Permalink to &quot;打开项目&quot;">​</a></h2><ul><li>使用 <a href="./../../tool/android-studio">Android Studio</a></li></ul><h2 id="导入app资源" tabindex="-1">导入App资源 <a class="header-anchor" href="#导入app资源" aria-label="Permalink to &quot;导入App资源&quot;">​</a></h2><ol><li><p>生成App资源 方式1: 使用 HBuilderX</p><ul><li>登录账号</li><li>打开 <code>uni-cli项目</code> 或 <code>HBuilderX项目</code> 的任意页面</li><li>发行 -&gt; 原生App-本地打包 -&gt; 生成本地打包App资源 <ul><li>导出路径 dist\\resources__UNI__EB45A35\\www</li></ul></li></ul></li><li><p>生成App资源 方式2: 使用 <a href="./../xm-cli">uni-cli项目</a></p><ul><li><code>pnpm build</code><ul><li>导出路径 dist\\build\\app</li></ul></li></ul></li></ol><ul><li>将以上导出的<code>www</code>或<code>app</code>目录, 放到 <code>安卓原生工程</code>\\app\\src\\main\\assets\\apps__UNI__xxx, 并重命名为<code>www</code></li></ul>',9),c=[a];function p(t,u,r,n,s,_){return i(),l("div",null,c)}const h=e(d,[["render",p]]);export{g as __pageData,h as default};
