import{_ as a,c as n,a0 as l,o as e}from"./chunks/framework.Bakaa70P.js";const F=JSON.parse('{"title":"关联微信开放平台","description":"","frontmatter":{},"headers":[],"relativePath":"uniapp/kf-app/wx-platform.md","filePath":"uniapp/kf-app/wx-platform.md","lastUpdated":1726830716000}'),p={name:"uniapp/kf-app/wx-platform.md"};function o(t,s,r,i,c,d){return e(),n("div",null,s[0]||(s[0]=[l(`<h1 id="关联微信开放平台" tabindex="-1">关联微信开放平台 <a class="header-anchor" href="#关联微信开放平台" aria-label="Permalink to &quot;关联微信开放平台&quot;">​</a></h1><blockquote><p>可用于 <code>APP跳转小程序</code>, <code>微信登录</code>, <code>微信支付</code>, <code>发送给朋友</code></p></blockquote><h2 id="前往并登录微信开放平台" tabindex="-1">前往并登录<a href="https://open.weixin.qq.com" target="_blank" rel="noreferrer">微信开放平台</a> <a class="header-anchor" href="#前往并登录微信开放平台" aria-label="Permalink to &quot;前往并登录[微信开放平台](https://open.weixin.qq.com)&quot;">​</a></h2><blockquote><p>需要 开发者资质认证, 其中&quot;主体名称&quot;要和以下的<code>应用官网</code>以及<code>所绑定的微信小程序</code>的主体名称一致</p></blockquote><h2 id="管理中心-移动应用" tabindex="-1">管理中心 -&gt; 移动应用 <a class="header-anchor" href="#管理中心-移动应用" aria-label="Permalink to &quot;管理中心 -&gt; 移动应用&quot;">​</a></h2><ul><li><p>创建移动应用</p><ul><li>移动应用名称: 应用名A (应用的中文名)</li><li>移动应用简介: 无</li><li>应用官网: 需要包含 &quot;应用的中文名&quot;和应用描述的关键字, 且符合&quot;应用类目&quot;</li><li>移动应用图片: 分别需要 <code>28*28</code>, <code>108*108</code> 的图标</li><li>应用已上架: 否</li><li>应用类目: 资讯-信息资讯</li><li>APP运行流程图: 需要在手机上截屏, 要包含顶部电量, 2~3张</li><li>申请/修改应用说明: 测试</li></ul></li><li><p>&quot;保存, 下一步&quot;</p><ul><li>Android平台</li><li>包名：<a href="./../app-key#Android包名">Android包名</a></li><li>应用签名：<code>6dbba301xxxxxxxxxxxxxxxxxxxxxxxx</code>, <a href="#获取应用签名">获取应用签名</a></li><li>iOS参考<a href="./../kf-ios/scheme">生成iOS通用链接</a></li></ul></li></ul><h2 id="获取应用签名" tabindex="-1">获取应用签名 <a class="header-anchor" href="#获取应用签名" aria-label="Permalink to &quot;获取应用签名&quot;">​</a></h2><ol><li><p>在<strong>安卓手机</strong>上安装&quot;我们的应用&quot;</p></li><li><p>前往微信开放平台的<a href="https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html#%E7%AD%BE%E5%90%8D%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7" target="_blank" rel="noreferrer">资源下载</a></p><ul><li>点击<code>签名生成工具</code>下载并解压zip文件, 获得<code>.apk</code>文件 <ul><li>在安装了&quot;我们的应用&quot;的<strong>安卓手机</strong>上安装并打开 -&gt; 输入 <a href="./../app-key#Android包名">Android包名</a></li></ul></li><li>注意 <ul><li>&quot;我们的应用&quot;是云打包而成的, 如果之后使用离线打包, 那么在跳转小程序时会有签名之类的问题</li></ul></li></ul></li></ol><h2 id="获取-【微信开放平台的appid】-wx0024xxxxxxxxxxxx" tabindex="-1">获取 【微信开放平台的AppID】 (wx0024xxxxxxxxxxxx) <a class="header-anchor" href="#获取-【微信开放平台的appid】-wx0024xxxxxxxxxxxx" aria-label="Permalink to &quot;获取 【微信开放平台的AppID】 (wx0024xxxxxxxxxxxx)&quot;">​</a></h2><ul><li>审核通过后, 复制 管理中心 -&gt; 查看 应用详情 -&gt; 复制 <code>AppID</code> (位于图标旁边)</li></ul><h2 id="云打包配置" tabindex="-1">云打包配置 <a class="header-anchor" href="#云打包配置" aria-label="Permalink to &quot;云打包配置&quot;">​</a></h2><ul><li>manifest.json -&gt; app-plus -&gt; distribute -&gt; sdkConfigs -&gt; share -&gt; weixin -&gt; appid, 粘贴复制的<code>AppID</code></li></ul><h2 id="跳转支付宝小程序" tabindex="-1">跳转支付宝小程序 <a class="header-anchor" href="#跳转支付宝小程序" aria-label="Permalink to &quot;跳转支付宝小程序&quot;">​</a></h2><ul><li>需要&quot;支付宝小程序&quot;邀请成为体验者, 并扫码进入&quot;体验版小程序&quot; <ul><li>小程序右上角<code>...</code> -&gt; 联调设置 -&gt; 勾选&quot;联调扫码版本&quot;</li></ul></li></ul><h2 id="跳转微信小程序" tabindex="-1">跳转微信小程序 <a class="header-anchor" href="#跳转微信小程序" aria-label="Permalink to &quot;跳转微信小程序&quot;">​</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">plus.share.</span><span style="color:#A6E22E;">getServices</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">res</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">	payOption </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> res.</span><span style="color:#A6E22E;">filter</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">item</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> item.id </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> type)[</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">	if</span><span style="color:#F8F8F2;"> (payOption) {</span></span>
<span class="line"><span style="color:#F8F8F2;">		payOption.</span><span style="color:#A6E22E;">launchMiniProgram</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#88846F;">			// 小程序的原始id, 注意测试版和正式版的原始id是不一样的</span></span>
<span class="line"><span style="color:#F8F8F2;">			id: </span><span style="color:#E6DB74;">&#39;gh_c2ece0685a62&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#88846F;">			// 跳转页面路径</span></span>
<span class="line"><span style="color:#F8F8F2;">			path,</span></span>
<span class="line"><span style="color:#F8F8F2;">		});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">		success</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">	} </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#A6E22E;">		fail</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;打开微信失败&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">	}</span></span>
<span class="line"><span style="color:#F8F8F2;">}, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#A6E22E;">	fail</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;访问应用失败&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="安卓离线打包" tabindex="-1">安卓离线打包 <a class="header-anchor" href="#安卓离线打包" aria-label="Permalink to &quot;安卓离线打包&quot;">​</a></h2><ul><li>\\app\\src\\main\\AndroidManifest.xml -&gt; manifest</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">uses-permission</span><span style="color:#A6E22E;"> android:name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;</span><span style="color:#F8F8F2;">/&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\\app\\src\\main\\AndroidManifest.xml -&gt; manifest -&gt; application</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">meta-data</span><span style="color:#A6E22E;"> android:name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;WX_APPID&quot;</span><span style="color:#A6E22E;"> android:value</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;微信开放平台的AppID&quot;</span><span style="color:#F8F8F2;">/&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\\app\\src\\main\\assets\\data\\dcloud_properties.xml -&gt; properties -&gt; features</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">feature</span><span style="color:#A6E22E;"> name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;Share&quot;</span><span style="color:#A6E22E;"> value</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;io.dcloud.share.ShareFeatureImpl&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">	&lt;</span><span style="color:#F92672;">module</span><span style="color:#A6E22E;"> name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;Weixin&quot;</span><span style="color:#A6E22E;"> value</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;io.dcloud.share.mm.WeiXinApiManager&quot;</span><span style="color:#F8F8F2;">/&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">feature</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,23)]))}const x=a(p,[["render",o]]);export{F as __pageData,x as default};
