import{_ as n,c as a,a0 as l,o as p}from"./chunks/framework.Bakaa70P.js";const b=JSON.parse('{"title":"JS 日期 【Date】","description":"","frontmatter":{},"headers":[],"relativePath":"webs/javascript/date.md","filePath":"webs/javascript/date.md","lastUpdated":1715407916000}'),e={name:"webs/javascript/date.md"};function o(r,s,t,c,F,y){return p(),a("div",null,s[0]||(s[0]=[l(`<h1 id="js-日期-【date】" tabindex="-1">JS 日期 【Date】 <a class="header-anchor" href="#js-日期-【date】" aria-label="Permalink to &quot;JS 日期 【Date】&quot;">​</a></h1><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-label="Permalink to &quot;基础&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 创建, 或 (new Date);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> _d </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 获取, get*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 时间戳, 或 Date.now(); 一个从&quot;1970, 1, 1&quot;至今的毫秒</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getTime</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 年; _d.getUTCFullYear(), 国际标准时间</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getFullYear</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 月, [0, 11]</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getMonth</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 日</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getDate</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 周, [0, 6]</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getDay</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 时</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getHours</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 分</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getMinutes</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 秒</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getSeconds</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 毫秒</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">getMilliseconds</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 设置, set*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 1月, 将上面的&quot;get&quot;改成&quot;set&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">setMonth</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">// 1号</span></span>
<span class="line"><span style="color:#F8F8F2;">_d.</span><span style="color:#A6E22E;">setDate</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="设置-2023-1-2" tabindex="-1">设置 2023/1/2 <a class="header-anchor" href="#设置-2023-1-2" aria-label="Permalink to &quot;设置 2023/1/2&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">2023</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;jan 2, 2023&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> (Date.bind.</span><span style="color:#A6E22E;">apply</span><span style="color:#F8F8F2;">(Date, [</span><span style="color:#AE81FF;">null</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">2023</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">]));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">[</span><span style="color:#AE81FF;">2023</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="计算" tabindex="-1">计算 <a class="header-anchor" href="#计算" aria-label="Permalink to &quot;计算&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 返回时间戳差值</span></span>
<span class="line"><span style="color:#F8F8F2;">Date.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">-</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">2023</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="兼容" tabindex="-1">兼容 <a class="header-anchor" href="#兼容" aria-label="Permalink to &quot;兼容&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 错误: 部分移动设备不能解析</span></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;2023-01-02 20:20:20&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 正确</span></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;2023/01/02 20:20:20&#39;</span><span style="color:#F8F8F2;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 错误: 不同的设备返回差异较多, &#39;2023/8/30&#39;, &#39;2023/8/30 15:19:59&#39;, &#39;2023/8/30 上午15:19:59&#39;</span></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">toLocaleDateString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 错误, 大部分设备正确返回 &#39;2023/8/30 15:19:59&#39;; 安卓APP返回 &#39;Wed Aug 30 2023 15:19:59 GMT+0800 (CST)&#39;</span></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">toLocaleString</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;zh&#39;</span><span style="color:#F8F8F2;">, {hour12: </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 正确, jg: &#39;2023-08-30 15:19:59&#39;</span></span>
<span class="line"><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">(Date.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 288e5</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">toISOString</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">replace</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;T&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39; &#39;</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">split</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.&#39;</span><span style="color:#F8F8F2;">)[</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> cDate </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">// 正确, jg: &#39;&#39;2023-8-30 15:19:59&#39;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> cTime </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> \`</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">cDate.</span><span style="color:#A6E22E;">getFullYear</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">-</span><span style="color:#F92672;">\${</span><span style="color:#AE81FF;">1</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> cDate.</span><span style="color:#A6E22E;">getMonth</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">-</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">cDate.</span><span style="color:#A6E22E;">getDate</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#F92672;"> \${</span><span style="color:#F8F8F2;">cDate.</span><span style="color:#A6E22E;">getHours</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">:</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">cDate.</span><span style="color:#A6E22E;">getMinutes</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">:</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">cDate.</span><span style="color:#A6E22E;">getSeconds</span><span style="color:#F8F8F2;">()</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">\`</span><span style="color:#F8F8F2;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="岁" tabindex="-1">岁 <a class="header-anchor" href="#岁" aria-label="Permalink to &quot;岁&quot;">​</a></h2><p>一年并非绝对的365天</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 格式化 年龄 (2020-9-9 =&gt; 1岁1个月)</span></span>
<span class="line"><span style="color:#F92672;">export</span><span style="color:#66D9EF;font-style:italic;"> const</span><span style="color:#A6E22E;"> formatAge</span><span style="color:#F92672;"> =</span><span style="color:#FD971F;font-style:italic;"> age</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	const</span><span style="color:#F8F8F2;"> da </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> age.</span><span style="color:#A6E22E;">split</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;-&#39;</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">map</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">item</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#A6E22E;"> parseInt</span><span style="color:#F8F8F2;">(item));</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	const</span><span style="color:#F8F8F2;"> dd </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Date</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	const</span><span style="color:#F8F8F2;"> db </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [dd.</span><span style="color:#A6E22E;">getFullYear</span><span style="color:#F8F8F2;">(), </span><span style="color:#AE81FF;">1</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> dd.</span><span style="color:#A6E22E;">getMonth</span><span style="color:#F8F8F2;">(), dd.</span><span style="color:#A6E22E;">getDate</span><span style="color:#F8F8F2;">()];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	let</span><span style="color:#F8F8F2;"> year </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	let</span><span style="color:#F8F8F2;"> month </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">	if</span><span style="color:#F8F8F2;"> (da[</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> db[</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">]) {</span></span>
<span class="line"><span style="color:#F8F8F2;">		month </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">	const</span><span style="color:#F8F8F2;"> leftM </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> db[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> month;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">	if</span><span style="color:#F8F8F2;"> (da[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> leftM) {</span></span>
<span class="line"><span style="color:#F8F8F2;">		month </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 12</span><span style="color:#F92672;"> -</span><span style="color:#F8F8F2;"> da[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> leftM;</span></span>
<span class="line"><span style="color:#F8F8F2;">		year </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">	} </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">		month </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> leftM </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> da[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"><span style="color:#F8F8F2;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">	year </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> db[</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> da[</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">] </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> year;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">	return</span><span style="color:#E6DB74;"> \`</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">year</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">岁</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">month </span><span style="color:#F92672;">?</span><span style="color:#E6DB74;"> \`</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">month</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">个月\`</span><span style="color:#F92672;"> :</span><span style="color:#E6DB74;"> &#39;&#39;</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">\`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div>`,13)]))}const E=n(e,[["render",o]]);export{b as __pageData,E as default};
